``
김영한 강사님의 스프링 핵심원리를 보고 복습을 위해 정리하였습니다. 
``
[강의링크](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8)

### 스프링과 애플리케이션
- 대부분의 스프링 애플리케이션은 웹 애플리케이션이다.
- 그리고 웹 애플리케이션은 여러고객으로부터 동시에 요청이 들어온다.
- 그런데 고객의 요청 하나하나 마다 객체를 생성해야한다면 어떻게 될까? -> 메모리 낭비가 심하여 효율적인 프로그램이 될 수없다.
<br> **이러한 문제를 싱글톤패턴으로 해결할 수 있다.**
### 스프링과 싱글톤
- 싱글톤에 대한 자세한 내용은 [싱글톤](https://github.com/GukSense/TIL/blob/main/Java/Object-Oriented%20Programming(%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5)/singleton.md) 이곳을 참고하도록 하자.
- 간략하게 요약하자면 싱글톤 패턴은
 - 클래스 인스턴스가 딱 하나만 생성되도록 보장하는 디자인패턴이기 때문에 고객요청이 올때마다 객체를 생성하는것이 아니라, 이미 만들어진 객체를 공유해서 효율적으로 사용할 수 있다. 
 - 하지만 싱글톤은 여러 클라이언트가 하나의 객체를 공유하는것이기 때문에 주의해야 할 점이 있다.
### 싱글톤 컨테이너
- 스프링 컨테이너는 싱글톤패턴 적용없이 알아서 객체인스턴스를 싱글톤으로 관리해준다. (스프링의 기본 빈 등록방식이 싱글톤이다.)
### 싱글톤 주의점
싱글톤은 여러 클라이언트가 하나의 같은 객체를 공유하기 때문에 싱글톤 객체는 상태를 유지(statefule)하게 설계하면 안된다.
<br><br>**무상태 설계**
- 특정 클라이언트에 의존적인 필드가 있으면 안된다.
- 값을 변경할 수 있는 필드가 있으면 안된다.
- 가급적 읽기만 가능해야한다.
- 필드 대신에 자바에서 공유되지않는 지역변수, 파라미터, ThreadLocal 등을 사용해야한다.

<br>
<br>
간단한 예시로 멀티스레드 환경에서
<br>

- 사용자 A가 싱글톤 객체의 필드값을 1000으로 설정하고 일정 시간후에 값을 불러오려고 함
- 그 사이 사용자B가 싱글톤 객체의 필드값을 0으로 수정해버렸다
- 돌아온 A가 값을 불러왔을때, 예상한값은 1000이지만 실제로 불러와진 값은 0이 되어버리고만다.

실제 애플리케이션 운영에서 이러한 문제가 발생하면 치명적오류가 발생할 수 있다. 



