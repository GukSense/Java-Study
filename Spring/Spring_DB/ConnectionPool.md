``
김영한 강사님의 스프링 DB 데이터 접근핵심원리를 보고 복습을 위해 정리하였습니다. 
``
[강의링크](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-db-1)


## Connection 이란?
- 애플리케이션과 데이터베이스 서버의 통신을 가능하게 해주는 요소
- **단계**
  - 연결설정
      <details>
      <summary>과정</summary>
          1. 애플리케이션은 DB Driver 를 통해 커넥션을 조회한다. <br>
          2. DB Driver는 TCP/IP 커넥션을 연결 함. <br> 
          3. DB Driver는 사용자이름, 비밀번호 ,호스트주소 의 정보를 DB에 던진다. <br>
          4. DB 는 위 정보로 내부인증을 완료하고 내부에 DB 세션을 생성한다. <br>
          5. DB 는 커넥션 생성이 완료되었다는 응답을 보낸다. <br>
          6. DB Driver는 커넥션 객체를 생성해서 애플리케이션에 반환한다. <br>
      </details>
  - 연결유지: 연결이 유지되면 일정시간동안 유지되거나 필요할때마다 새로운 연결을 설정한다.
  - 데이터전송: 연결이 되면 데이터베이스와 정보를 주고받고 할수 있으며 이과정에서 수정, 삭제, 검색 등을 할 수 있다.
  - 연결해제: 작업완료 후 연결을 해제하거나 일정시간이 지나면 연결이 종료된다.

## ConnectionPool 이란? (DBCP) 
- 데이터베이스 서버와의 연결을 효율적으로 관리하기 위한 기술
- **Why?**
  - 일반적으로 데이터베이스 연결은 비용이 많이드는 작업 중 하나이고 매번 새로운 연결을 만들고 해제하는것은 성능에 부담을 준다.
  - 예전 JDBC 를 사용 할 때는 DriverManager 를 통해 Connection 객체를 받아와서 사용자가 요청 할 때 마다 드라이버를 로드하고 연결하고 종료했기 때문에 매우 비효율적이였다.
- 더이상 DB Driver 를 통해서 Connection을 획득 하지앟는다.
- 미리 Connecton Pool 에서 connection 객체를 생성 해 두었다가 요청이 오면 빌려주고 사용이 끝나면 커넥션이 살아있는 상태로 반납한다.
- 요청이 올때마다 Connection 객체를 새로 생성하여 비용이 소모되지않는다. (이미 만들어둔것을 사용하고 다시 재사용 하기 때문)
- 사용도 편리하고 성능도 뛰어난 오픈소스 커넥션 풀이 많기 때문에 오픈소스를 사용하는 것이 좋다.
- 대표적인 ConnectionPool 오픈소스는 `commons-dbcp2`, `tomcat-jdbc pool`, `HikariCP` 등이 있다.
